CREATE TABLE USERS (USER_ID BIGINT NOT NULL, ACC_NON_EXPIRED BOOLEAN, ACC_NON_LOCKED BOOLEAN, VALID_FROM DATE, PASSWORD_NON_EXPIRED BOOLEAN, ACTIVE BOOLEAN, PASSWORD VARCHAR(100) NOT NULL, SALT VARCHAR, USER_NAME VARCHAR(50) NOT NULL UNIQUE, VER_NO BIGINT, FIRST_NAME VARCHAR NOT NULL, LAST_NAME VARCHAR, MIDDLE_NAME VARCHAR, PRIMARY KEY (USER_ID))
CREATE TABLE CONFIGURATIONS (CONFIG_ID BIGINT NOT NULL, CONFIG_VALUE VARCHAR NOT NULL, VER_NO BIGINT, CONFIG_ITEM_ID BIGINT, USER_ID BIGINT, PRIMARY KEY (CONFIG_ID))
CREATE TABLE CONFIGURATION_ITEMS (CONFIG_ITEM_ID BIGINT NOT NULL, CONFIG_ITEM_KEY VARCHAR, CONFIG_TYPE INTEGER, DEFAULT_VALUE VARCHAR, IS_KEY_VALUE_PAIR BOOLEAN, CONFIG_ITEM_TYPE INTEGER, VER_NO BIGINT, PRIMARY KEY (CONFIG_ITEM_ID))
CREATE INDEX INDEX_CONFIGURATION_ITEMS_CONFIG_ITEM_KEY ON CONFIGURATION_ITEMS (CONFIG_ITEM_KEY)
CREATE TABLE SESSION_REGISTRY (ITEM_ID BIGINT NOT NULL, EXPIRED BOOLEAN, LAST_REQUEST_TIME TIMESTAMP, SESSION_ID VARCHAR UNIQUE, VER_NO BIGINT, PRINCIPAL BIGINT, PRIMARY KEY (ITEM_ID))
CREATE TABLE AUTHORITIES (AUTHORITY_ID BIGINT NOT NULL, AUTHORITY VARCHAR(50) UNIQUE, VER_NO BIGINT, PRIMARY KEY (AUTHORITY_ID))
CREATE TABLE EXTENSIONS (EXTENSION_ID BIGINT NOT NULL, EXTENSION_NAME VARCHAR, CLUSTER_NAME VARCHAR(1000) NOT NULL, ENTITY_NAME VARCHAR, EXTENSION_TYPE VARCHAR, TENANT VARCHAR, VER_NO BIGINT, PRIMARY KEY (EXTENSION_ID))
CREATE TABLE EXTENSIONVALUE (EXTN_VAL_ID BIGINT NOT NULL, VALUE VARCHAR, VER_NO BIGINT, EXTN_ID BIGINT, PRIMARY KEY (EXTN_VAL_ID))
CREATE TABLE WM_PARAMS (PARAM_ID BIGINT NOT NULL, AMOUNT_DECIMALS BIGINT, RATE_DECIMALS BIGINT, PERCENT_DECIMALS BIGINT, PRICE_DECIMALS BIGINT, UNIT_DECIMALS BIGINT, VER_NO BIGINT, PRIMARY KEY (PARAM_ID))
CREATE TABLE EXPENSES (EXPENSE_ID BIGINT NOT NULL, ACTIVE BOOLEAN, DESCRIPTION VARCHAR, EXPEXNSE_DATE DATE NOT NULL, EXPENSE INTEGER NOT NULL, VER_NO BIGINT, TYPE_ID BIGINT, USER_EXP_FK BIGINT, PRIMARY KEY (EXPENSE_ID))
CREATE TABLE EXPENSE_TYPES (TYPE_ID BIGINT NOT NULL, DESCRIPTION VARCHAR(2500), SHOW_IN_DB BOOLEAN, EXP_TYPE VARCHAR NOT NULL, VER_NO BIGINT, USER_EXP_FK BIGINT, PRIMARY KEY (TYPE_ID))
CREATE TABLE USER_EXPENSES (USER_EXP_ID BIGINT NOT NULL, VER_NO BIGINT, USER_FK BIGINT UNIQUE, PRIMARY KEY (USER_EXP_ID))
CREATE TABLE FORECAST_EXPENSE (FORECAST_EXPENSE_ID BIGINT NOT NULL, FORECAST_DATE DATE, DESCRIPTION VARCHAR, FORECAST_AMOUNT NUMERIC(38), FORECAST_TYPE VARCHAR, PERIOD VARCHAR, IS_PERIODIC BOOLEAN, TITLE VARCHAR, VER_NO BIGINT, USER_EXP_FK BIGINT, PRIMARY KEY (FORECAST_EXPENSE_ID))
CREATE TABLE USER_AUTHORITIES (USER_ID BIGINT NOT NULL, AUTHORITY_ID BIGINT NOT NULL, PRIMARY KEY (USER_ID, AUTHORITY_ID))
ALTER TABLE CONFIGURATIONS ADD CONSTRAINT UNQ_CONFIGURATIONS_0 UNIQUE (USER_ID, CONFIG_ITEM_ID)
ALTER TABLE CONFIGURATION_ITEMS ADD CONSTRAINT UNQ_CONFIGURATION_ITEMS_0 UNIQUE (CONFIG_ITEM_KEY)
ALTER TABLE EXPENSE_TYPES ADD CONSTRAINT UNQ_EXPENSE_TYPES_0 UNIQUE (USER_EXP_FK, EXP_TYPE)
ALTER TABLE CONFIGURATIONS ADD CONSTRAINT FK_CONFIGURATIONS_USER_ID FOREIGN KEY (USER_ID) REFERENCES USERS (USER_ID)
ALTER TABLE CONFIGURATIONS ADD CONSTRAINT FK_CONFIGURATIONS_CONFIG_ITEM_ID FOREIGN KEY (CONFIG_ITEM_ID) REFERENCES CONFIGURATION_ITEMS (CONFIG_ITEM_ID)
ALTER TABLE SESSION_REGISTRY ADD CONSTRAINT FK_SESSION_REGISTRY_PRINCIPAL FOREIGN KEY (PRINCIPAL) REFERENCES USERS (USER_ID)
ALTER TABLE EXTENSIONVALUE ADD CONSTRAINT FK_EXTENSIONVALUE_EXTN_ID FOREIGN KEY (EXTN_ID) REFERENCES EXTENSIONS (EXTENSION_ID)
ALTER TABLE EXPENSES ADD CONSTRAINT FK_EXPENSES_TYPE_ID FOREIGN KEY (TYPE_ID) REFERENCES EXPENSE_TYPES (TYPE_ID)
ALTER TABLE EXPENSES ADD CONSTRAINT FK_EXPENSES_USER_EXP_FK FOREIGN KEY (USER_EXP_FK) REFERENCES USER_EXPENSES (USER_EXP_ID)
ALTER TABLE EXPENSE_TYPES ADD CONSTRAINT FK_EXPENSE_TYPES_USER_EXP_FK FOREIGN KEY (USER_EXP_FK) REFERENCES USER_EXPENSES (USER_EXP_ID)
ALTER TABLE USER_EXPENSES ADD CONSTRAINT FK_USER_EXPENSES_USER_FK FOREIGN KEY (USER_FK) REFERENCES USERS (USER_ID)
ALTER TABLE FORECAST_EXPENSE ADD CONSTRAINT FK_FORECAST_EXPENSE_USER_EXP_FK FOREIGN KEY (USER_EXP_FK) REFERENCES USER_EXPENSES (USER_EXP_ID)
ALTER TABLE USER_AUTHORITIES ADD CONSTRAINT FK_USER_AUTHORITIES_AUTHORITY_ID FOREIGN KEY (AUTHORITY_ID) REFERENCES AUTHORITIES (AUTHORITY_ID)
ALTER TABLE USER_AUTHORITIES ADD CONSTRAINT FK_USER_AUTHORITIES_USER_ID FOREIGN KEY (USER_ID) REFERENCES USERS (USER_ID)
CREATE TABLE SEQUENCE (SEQ_NAME VARCHAR(50) NOT NULL, SEQ_COUNT NUMERIC(38), PRIMARY KEY (SEQ_NAME))
INSERT INTO SEQUENCE(SEQ_NAME, SEQ_COUNT) values ('EXTENSION_GEN', 0)
CREATE TABLE ID_GEN (ID_NAME VARCHAR(50) NOT NULL, ID_VAL NUMERIC(38), PRIMARY KEY (ID_NAME))
INSERT INTO ID_GEN(ID_NAME, ID_VAL) values ('FORECAST_SEQ', 0)
INSERT INTO SEQUENCE(SEQ_NAME, SEQ_COUNT) values ('USER_GEN', 0)
INSERT INTO ID_GEN(ID_NAME, ID_VAL) values ('USER_EXP_SEQ', 0)
INSERT INTO ID_GEN(ID_NAME, ID_VAL) values ('EMP_SEQ', 0)
INSERT INTO SEQUENCE(SEQ_NAME, SEQ_COUNT) values ('CONFIG_GEN', 0)
INSERT INTO SEQUENCE(SEQ_NAME, SEQ_COUNT) values ('SESSION_REGISTRY_GEN', 0)
INSERT INTO SEQUENCE(SEQ_NAME, SEQ_COUNT) values ('CONFIG_ITEM_GEN', 0)
INSERT INTO SEQUENCE(SEQ_NAME, SEQ_COUNT) values ('EXTN_VAL_GEN', 0)
INSERT INTO SEQUENCE(SEQ_NAME, SEQ_COUNT) values ('AUTH_GEN', 0)
INSERT INTO SEQUENCE(SEQ_NAME, SEQ_COUNT) values ('WM_PARAMS_GEN', 0)
INSERT INTO ID_GEN(ID_NAME, ID_VAL) values ('EXP_TYPE_SEQ', 0)
